ПРАКТИЧЕСКАЯ РАБОТА №6
Создание API при помощи пакета Conduit.
Цель работы: создать API при помощи пакета Conduit, реализовать учет финансов (Номер операции, Название операции, Описание, Категория, Дата операции, Сумма операции).
Для начала необходимо подготовить окружение:
 
Рисунок 44 – Подготовка

 
Рисунок 45 – Подготовка
 
Рисунок 46 - Указание пути до папки flutter/bin

Установка пакета conduit осуществляется посредствам ввода команды: conduit: dart pub global activate conduit.
 
Рисунок 47 - Необходимые зависимости
 
Рисунок 48 - Иерархия проекта
В папке bin находится main файл, в котором прописаны настройки запуска проекта на определённых портах:
 
Рисунок 49 - main файл

В папке lib находится класс AppService в котором инициализируется БД, а также происходит непосредственно запуск API.
 
Рисунок 50 - класс AppService

Далее необходимо создать файл database.yaml в котором будут храниться все значения, необходимые для инициализации БД в файле AppService.
 
Рисунок 51 - databse.yaml
Реализация миграции моделей в БД будет осуществляться через файлы находящиеся в папке model.
 
Рисунок 52 - папка model
Код реализации модели (последующие создания моделей реализовываются подобным образом):
 
Рисунок 53 - Реализация модели User\
Для миграции модели в БД необходимо прописать следующие команды (перед миграцией необходимо импортировать модели в классе AppService):
dart pub run conduit:conduit db generate – генерация миграционного файла
dart pub run conduit:conduit db validate – валидация файла
dart pub run conduit:conduit db upgrade – осуществление миграции

Для создания связей между таблицами используется @relate:
 
Рисунок 54 - Модель в которую входят ключи

 
Рисунок 55 - Модель из который выходит ключ
Для удобного вывода данных после обращения к api можно создать модель:
 
Рисунок 56 – ModelResponse
Токен это неотъемлемая часть пользователя в web разработке. Благодаря токену api будет понимать есть ли пользователь в системе и представлять ему отдельные права.
В папке utils находится класс, отвечающий за обработку токена и вытягивание из него id пользователя.
 
Рисунок 57 – AppUtilss
Также в этой папке находится файл app_ressponse отвечающий за обработку ошибок.
 
Рисунок 58 - Обработка запросов
Далее необходимо создать папку с контроллерами где будут прописаны все виды запросов:
 
Рисунок 59 - Реализация контроллера
Результат работы: 
 
Рисунок 60 - Результат работы
Вывод: удалось создать API при помощи пакета Conduit, реализовать учет финансов (Номер операции, Название операции, Описание, Категория, Дата операции, Сумма операции).
